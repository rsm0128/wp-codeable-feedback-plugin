!function(e){let a=codeable_var.ajax_url,t=function(t){t.preventDefault();let s=e(t.target),d=s.closest(".codeable-block"),n=s.serialize();d.removeClass("codeable-error").addClass("loading"),e.ajax({url:a,method:"POST",dataType:"json",data:n,success:function(e){e.success?(d.addClass("codeable-success"),d.get(0).scrollIntoView()):(s.find(".error-message").html(e.data.message),d.addClass("codeable-error"))},error:function(e,a,t){s.find(".error-message").html(e.status+" : "+e.statusText),d.addClass("codeable-error")},complete:function(){d.removeClass("loading")}})},s=function(t,s=1,o=10){t.removeClass("codeable-error").addClass("loading"),e.ajax({url:a,method:"POST",dataType:"json",data:{action:"codeable_feedback_get_list",_nonce:t.data("nonce"),page:s,per_page:o},success:function(e){e.success?(d(t,e.data.list),n(t,s,o,e.data.total_count)):(t.find(".error-message").html(e.data.message),t.addClass("codeable-error"))},error:function(e,a,s){t.find(".error-message").html(e.status+" : "+e.statusText),t.addClass("codeable-error")},complete:function(){t.removeClass("loading")}})},d=function(e,a){if(a.length){e.addClass("has-data");let t="";for(item of a)t+=`<tr data-id="${item.id}">\n          <td>${item.first_name}</td>\n          <td>${item.last_name}</td>\n          <td>${item.email}</td>\n          <td>${item.subject}</td>\n        </tr>`;e.find("tbody.feedback-list").html(t)}else e.find("tbody.feedback-list").html(""),e.removeClass("has-data")},n=function(e,a,t,d){d<=t?e.find(".codeable-pagination").hide():e.find(".codeable-pagination").show().pagination({items:d,itemsOnPage:t,currentPage:a,displayedPages:3,edges:1,onPageClick(a,d){d.preventDefault(),s(e,a,t),e.closest("#feedback-list-wrapper").get(0).scrollIntoView({behavior:"smooth"})}})},o=function(e,a){e.find(".feedback-detail").show(),e.find(".txt-id").text(a.id),e.find(".txt-first-name").text(a.first_name),e.find(".txt-last-name").text(a.last_name),e.find(".txt-email").text(a.email),e.find(".txt-subject").text(a.subject),e.find(".txt-message").text(a.message)};e(document).ready(function(){e(".feedback-form").on("submit",t),e(".feedback-list-table .feedback-list").on("click","tr",function(){let t=e(this).data("id");!function(t,s){t.removeClass("codeable-error").addClass("loading"),e.ajax({url:a,method:"POST",dataType:"json",data:{action:"codeable_feedback_get_detail",_nonce:t.data("nonce"),id:s},success:function(e){e.success?o(t,e.data.item):(t.find(".error-message").html(e.data.message),t.addClass("codeable-error"))},error:function(e,a,s){t.find(".error-message").html(e.status+" : "+e.statusText),t.addClass("codeable-error")},complete:function(){t.removeClass("loading")}})}(e(this).closest("#feedback-list-wrapper").find(".feedback-detail-container"),t)}),e("#feedback-list-wrapper").length&&e("#feedback-list-wrapper").each(function(a){s(e(this).find(".feedback-list-container"),1,10)})})}(jQuery);